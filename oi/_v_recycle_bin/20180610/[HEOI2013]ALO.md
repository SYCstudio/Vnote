# [HEOI2013]ALO
[BZOJ3166 Luogu4098]

Welcome to ALO ( Arithmetic and Logistic Online)。这是一个 VR MMORPG， 如名字所见，到处充满了数学的谜题  
现在你拥有 n 颗宝石，每颗宝石有一个能量密度，记为 ai，这些宝石的能量 密度两两不同。现在你可以选取连续的一些宝石（必须多于一个）进行融合，设 为 ai, ai+1, …, aj，则融合而成的宝石的能量密度为这些宝石中能量密度的次大值 与其他任意一颗宝石的能量密度按位异或的值，即，设该段宝石能量密度次大值 为 k，则生成的宝石的能量密度为 max{k xor ap | ap ≠ k , i ≤ p ≤ j}  
现在你需要知道你怎么选取需要融合的宝石，才能使生成的宝石能量密度最 大

假设枚举一个数$i$，问题其实就是求在区间$[l,r]$内，$[i]$是第二大的数，与$[i]$的最大异或和。  
求最大异或和可以用$Trie$树+按位贪心的方式，从高到低贪心选择。而区间问题可以用可持久化