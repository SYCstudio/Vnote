# 博弈论

## 基本定义和性质

### 必胜点和必败点

$P$ 必败点，当前先手无论如何必败的点  
$N$ 必胜点，当前先手如果正确操作能够胜利的点

#### 性质

所有游戏的终止位置都是都是 $P$   
任何必胜点一定能进入一个必败点  
任何必败点只能进入必胜点

### 无偏博弈

无偏博弈是一类任意局势对于游戏双方都是平等的**回合制**双人游戏。平等的含义是当前的所有可行的走法仅仅只依赖与当前的局势，而与当前谁移动无关。换而言之，两个人除了先后手的区别之外就不存在任何区别。除此之外，还需要满足一下性质：  

完全信息，任何一个游戏者都能够知晓整个游戏状态。  
无随机行动，所有的行动都会转移到一个唯一确定的状态。  
有限步内游戏会终止，此时有唯一的胜者。

### 正确性的证明方法

根据定义，证明一种判断 $position$ 的性质的方法的正确性，只需证明三个命题

- 这个判断将所有结束位置判断为 $P$ 点
- 根据这个判断得出的 $N$ 点一定能走到一个 $P$ 点
- 根据这个判断得出的 $P$ 点一定不能走到一个 $P$ 点

## 对抗搜索
一般而言，站在两个人的立场上进行搜索。  
通常为了方便处理，将一个人的权值设置为负数，另一个为正数，这样就可以在不同的层进行 $min-max$ 搜索。

### Alpha-Beta剪枝
$Alpha-Beta$ 剪枝在于把父亲或者祖先的信息向下传递，若发现当前的答案无论如何都无法更新祖先时，直接返回。

### 记忆化
对于可记忆的搜索，可以加上记忆化或转化为可以记忆化的方式，通常是对于某一局面，两人不论谁先操作，得到的结果一样时，可以记忆化。

## 巴什博弈（Bash Game）

### 基本问题

给出一堆 $n$ 个石子，每次可以选择 $1-m$ 个，最后无法选择的人输，求先后手的获胜情况。

### 结论

当 $(m+1)|n$ 的时候，先手必败，否则先手必胜。

### 证明

可以知道，$[1,m]$ 内是先手必胜的，$m+1$ 只能转移到 $N$ 节点，所以是 $P$ 节点，依次类推

一般而言，都是用这种分析必胜、必败区间的方法来证明或者归纳其正确性。

## 尼姆博弈（Nim Game）

### 基本问题

给出若干堆石子，每次可以从某堆石子中任意选取若干个，不能操作者输。

### 结论

当所有堆石子异或和为 $0$ 的时候，先手必败，否则先手必胜

### 证明

可以直接用 $SG$ 定理来证，也可以根据必胜必败点的定义来证。下面证明定义的三个命题成立。

命题一：终止位置只有一个，那就是所有石子堆都为 $0$ ，此时异或和为 $0$ ，得证  
命题二：任意一个非 $0$ 的异或组合一定能找到那个最高位 $1$ 的来源使之走到一个异或和为 $0$ 的组合，得证  
命题三：任意一个异或和为 $0$ 的组合去掉任意一个数后异或和都不为 $0$ ，得证  
三个命题均成立，所以成立。

### 扩展形式

> 限定每次取的上限，即每次只能取 $[1,m]$ 个

相当于与 $Bash Game$ 进行组合，那么将所有石子对 $(m+1)$ 取模再进行 $Nim$ 游戏