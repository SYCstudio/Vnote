# [HNOI2010]合唱队
[BZOJ1996 Luogu3205]

为了在即将到来的晚会上有更好的演出效果，作为AAA合唱队负责人的小A需要将合唱队的人根据他们的身高排出一个队形。假定合唱队一共N个人，第i个人的身高为Hi米(1000<=Hi<=2000),并已知任何两个人的身高都不同。假定最终排出的队形是A 个人站成一排，为了简化问题，小A想出了如下排队的方式：他让所有的人先按任意顺序站成一个初始队形，然后从左到右按以下原则依次将每个人插入最终棑排出的队形中：  
-第一个人直接插入空的当前队形中。  
-对从第二个人开始的每个人，如果他比前面那个人高(H较大)，那么将他插入当前队形的最右边。如果他比前面那个人矮(H较小)，那么将他插入当前队形的最左边。  
当N个人全部插入当前队形后便获得最终排出的队形。  
例如，有6个人站成一个初始队形，身高依次为1850、1900、1700、1650、1800和1750,  
那么小A会按以下步骤获得最终排出的队形：  
1850  
    1850 , 1900 因为 1900 > 1850  
    1700, 1850, 1900 因为 1700 < 1900  
    1650 . 1700, 1850, 1900 因为 1650 < 1700  
    1650 , 1700, 1850, 1900, 1800 因为 1800 > 1650  
    1750， 1650, 1700，1850, 1900, 1800 因为 1750 < 1800  
因此，最终排出的队形是 1750，1650，1700，1850, 1900，1800  
小A心中有一个理想队形，他想知道多少种初始队形可以获得理想的队形

设 F[i][j][0/1] 表示 [i..j] 最后一个是放在左边还是右边的方案数，根据这一次的大小情况讨论转移。

```cpp
#include<iostream>
#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<algorithm>
using namespace std;

#define ll long long
#define mem(Arr,x) memset(Arr,x,sizeof(Arr))

const int maxN=1010;
const int Mod=19650827;
const int inf=2147483647;

int n;
int H[maxN],F[maxN][maxN][2];

void Plus(int &x,int y);

int main(){
	scanf("%d",&n);
	for (int i=1;i<=n;i++) scanf("%d",&H[i]);
	for (int i=1;i<=n;i++) F[i][i][0]=1;
	for (int len=2;len<=n;len++)
		for (int l=1;l+len-1<=n;l++){
			int r=l+len-1;
			if (H[l]<H[r]) Plus(F[l][r][0],F[l+1][r][1]);
			if (H[l]<H[l+1]) Plus(F[l][r][0],F[l+1][r][0]);
			if (H[r]>H[l]) Plus(F[l][r][1],F[l][r-1][0]);
			if (H[r]>H[r-1]) Plus(F[l][r][1],F[l][r-1][1]);
		}

	printf("%d\n",(F[1][n][0]+F[1][n][1])%Mod);

	return 0;
}

void Plus(int &x,int y){
	x=(x+y)%Mod;return;
}
```